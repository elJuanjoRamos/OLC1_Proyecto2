<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <style>
        .rownr {
            overflow-y: hidden;
            background-color: rgb(105, 105, 105);
            color: white;
            text-align: right;
            vertical-align: top;
            z-index: 0
        }

        .txt {
            width: 95%;
            overflow-x: scroll;
            background: transparent;
            z-index: 0
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand navbar-dark bg-dark">
        <a href="index.html" class="navbar-brand">Home</a>
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <a href="#" class="nav-item active nav-link">Nueva Tab</a>
                <li class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle active" id="navbarDropdown" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Reportes</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a href="/lexerror" class="dropdown-item">Errores Lexicos</a>
                        <a href="#" class="dropdown-item">Errores Sintacticos</a>
                    </div>
                </li>
            </ul>

            <form action="#" method="post" class="form-inline my-2 mylg-0">
                <input type="search" name="buscar" id="buscar" class="form-control mr-sm-2"
                    placeholder="Buscar em todo o site" aria-label="Buscar">
                <button class="btn btn-outline-success" type="submit">Pesquisar</button>
            </form>
        </div>
    </nav>
    <br>
    <br>
    <div>
        <div class="container">
            <div class="row row-full-height">
                <div class="col-sm-6 col-md-6 col-full-height col-vertical-height login-form">
                    <div class="col-vertical-top">
                        <form method="POST" action="/analizar" id="form" class="form-horizontal justify-content-center"
                            role="form">
                            <nav>
                                <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                    <a class="nav-item nav-link" id="nav-home-tab0" data-toggle="tab" href="#nav-home0"
                                        role="tab" aria-selected="true">Pesta√±a 1</a>
                                </div>
                            </nav>
                            <div class="tab-content" id="nav-tabContent">
                                <div class="tab-pane fade show active justify-content-center" id="nav-home0"
                                    role="tabpane0" aria-labelledby="nav-home-tab">
                                    <br>
                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend">
                                            <input type="file" accept=".cs"
                                                class="btn btn-outline-secondary form-control-file"
                                                (change)="fileChanged($event)">
                                            <button class="btn btn-outline-primary" (click)="uploadDocument(0)"
                                                type="button">Cargar
                                                Doc</button>
                                            <button class="btn btn-outline-success" type="submit"
                                                type="button">Analizar</button>
                                        </div>
                                    </div>

                                    <!--<textarea #textArea id="textArea0" style="width: 100%; height: 300px;"></textarea>-->
                                    <div>
                                        <textarea class="rownr" style="height: 300px;" rows="20" cols="3" value="1"
                                            readonly></textarea>
                                        <span>
                                            <textarea class="txt" name="textAreaAnalizar" id="textAreaAnalizar"
                                                style="width: 90%; height: 300px;" nowrap="nowrap" wrap="off"
                                                autocomplete="off" autocorrect="off" autocapitalize="off"
                                                spellcheck="false" oninput="input_changed(this)"
                                                onchange="input_changed(this)"
                                                onscroll="scroll_changed(this)">{{ .Text }}</textarea><br /><br />
                                        </span>
                                    </div>
                                </div>

                            </div>
                        </form>
                        <br>


                    </div>
                </div>
                <div class="hidden-xs col-sm-6 col-md-6 col-full-height login-main-content">
                    <div class="row">
                        <div class="col-md-10 col-md-offset-1">
                            <div class="content-box">
                                <br>
                                <h3 class="content-box-title">Consola</h3>
                                <div class="content-box-text">
                                    <textarea name="textAreaConsola" readonly id="textAreaConsola"
                                                style="width: 100%; height: 300px;">{{ .Console }}</textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>


    </div>


</body>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

<SCRIPT Language="javascript">
    var cntline;

    function input_changed(obj_txt) {
        obj_rownr = obj_txt.parentElement.parentElement.getElementsByTagName('textarea')[0];
        cntline = count_lines(obj_txt.value);
        if (cntline == 0) cntline = 1;
        tmp_arr = obj_rownr.value.split('\n');
        cntline_old = parseInt(tmp_arr[tmp_arr.length - 1], 10);
        // if there was a change in line count
        if (cntline != cntline_old) {
            obj_rownr.cols = cntline.toString().length; // new width of txt_rownr
            populate_rownr(obj_rownr, cntline);
            scroll_changed(obj_txt);
        }
    }

    function scroll_changed(obj_txt) {
        obj_rownr = obj_txt.parentElement.parentElement.getElementsByTagName('textarea')[0];
        scrollsync(obj_txt, obj_rownr);
    }

    function scrollsync(obj1, obj2) {
        // scroll text in object id1 the same as object id2
        obj2.scrollTop = obj1.scrollTop;
    }

    function populate_rownr(obj, cntline) {
        tmpstr = '';
        for (i = 1; i < cntline; i++) {
            tmpstr = tmpstr + i.toString() + '\n';
        }
        obj.value = tmpstr;
    }

    function count_lines(txt) {
        if (txt == '') {
            return 1;
        }
        return txt.split('\n').length + 1;
    }

</SCRIPT>

</html>