<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/docs/4.0/assets/img/favicons/favicon.ico">

    <title>Proyecto 2</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/album/">

    <!-- Bootstrap core CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <!-- Custom styles for this template -->
    <link href="https://getbootstrap.com/docs/4.0/examples/album/album.css" rel="stylesheet">
    <style>
        
        .rownr {
            overflow-y: hidden;
            background-color: rgb(105, 105, 105);
            color: white;
            text-align: right;
            vertical-align: top;
            z-index: 0
        }

        .analize {
            width: 95%;
            overflow-x: scroll;
            background: transparent;
            z-index: 0
        }
    </style>
</head>

  <body>

    <header>
      <div class="collapse bg-dark" id="navbarHeader">
        <div class="container">
          <div class="row">
            <div class="col-sm-8 col-md-7 py-4">
              <h4 class="text-white">About</h4>
              <p class="text-muted">Add some information about the album below, the author, or any other background context. Make it a few sentences long so folks can pick up some informative tidbits. Then, link them off to some social networking sites or contact information.</p>
            </div>
            <div class="col-sm-4 offset-md-1 py-4">
              <h4 class="text-white">Reportes</h4>
              <ul class="list-unstyled">
                <li><a onclick="getLexError('/lexerror', 'lex')"  class="text-white">Errores Lexicos</a></li>
                <li><a onclick="getLexError('/sinterror', 'sint')" class="text-white">Errores Sintacticos</a></li>
                <li><a onclick="getTree()" class="text-white">Arbol de analisis sintactico</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="navbar navbar-dark bg-dark box-shadow">
        <div class="container d-flex justify-content-between">
          <a class="navbar-brand d-flex align-items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>
            <strong>Proyecto 2</strong>
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
      </div>
    </header>

    <main role="main">

      <section class="jumbotron text-center">
        <div class="container">
          <h1 class="jumbotron-heading">Album example</h1>
          <p class="lead text-muted">Something short and leading about the collection belowâ€”its contents, the creator, etc. Make it short and sweet, but not too short so folks don't simply skip over it entirely.</p>
          <p>
            <a href="#" class="btn btn-primary my-2">Main call to action</a>
            <a href="#" class="btn btn-secondary my-2">Secondary action</a>
          </p>
        </div>
      </section>

      <div class="album py-5 bg-light">
        <div class="container" >

            <div class="row">
                <div class="col">

                </div>
                <div class="col-8">
                  
                    
                    <ul class="nav nav-tabs justify-content-center" id="myTab" role="tablist">
                        <li class="nav-item">
                          <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Analisis Lexico/Sintactico</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" id="copy-tab" data-toggle="tab" href="#copy" role="tab" aria-controls="copy" aria-selected="false">Analisis Copias</a>
                        </li>
                      </ul>


                      <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                            <br>
                            <div class="content">
                                <div class="btn-group" role="group" aria-label="...">
                                    <input type="file" style="width: 30%;" id="file-input" accept=".java" class="btn btn-outline-secondary form-control-file">
                                
                                    <button class="btn btn-outline-primary" id="read-button" type="button">Cargar
                                        Doc</button>
                                      <button class="btn btn-outline-success"  onclick="analizar()"
                                        type="button">Analizar</button>
                                        <button class="btn btn-outline-warning"   onclick="saveText()"
                                        type="button">Save Text</button>
                                        <button class="btn btn-outline-danger"   onclick="saveText()"
                                        type="button">Save Console</button>
                                </div>
                            </div>
                            <br>
                            <div class="content">
                                <textarea class="rownr" style="height: 300px;" rows="20" cols="3" value="1" readonly></textarea>
                                <span>
                                    <textarea class="analize" name="textAreaAnalizar" id="textAreaAnalizar"
                                        style="background-color: white; width: 90%; height: 300px;" nowrap="nowrap" wrap="off"
                                        autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                                        oninput="input_changed(this)" onchange="input_changed(this)"
                                        onscroll="scroll_changed(this)"></textarea><br /><br />
                                </span>
                            </div>
                           <br>
                           <div class="content">
                            <h3>Consola</h3>
                                <div class="content-box-text">
                                    <textarea name="textAreaConsola" readonly id="textAreaConsola"
                                        style="width: 100%; height: 300px;">{{ .Console }}</textarea>
                                </div>
                           </div>


                        </div>






                        <div class="tab-pane fade" id="copy" role="tabpanel" aria-labelledby="copy-tab">
                            
                            <div class="row">
                                <div class="col-md-5">
                                    <div style=" width: 550px;  margin-left: -170px; height: 700px;">
                                        <h3 >Entrada 1</h3>
                                        <div class="content">
                                            <br>
                                            <div class="content">
                                                <div class="btn-group" role="group" aria-label="...">
                                                    <input type="file" style="width: 30%;" id="file-input" accept=".java" class="btn btn-outline-secondary form-control-file">
                                                
                                                    <button class="btn btn-outline-primary" id="read-button" type="button">Cargar
                                                        Doc</button>
                                                        </div>
                                                    </div>  
                                        <br>
                                            <textarea class="rownr" style="height: 600px;" rows="20" cols="3" value="1" readonly></textarea>
                                            <span>
                                                <textarea class="analize" name="textAreacopy" id="textAreacopy"
                                                    style="background-color: white; width: 70%; height: 600px;" nowrap="nowrap" wrap="off"
                                                    autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                                                    oninput="input_changed(this)" onchange="input_changed(this)"
                                                    onscroll="scroll_changed(this)"></textarea><br /><br />
                                            </span>
                                        </div>
                                    </div>


                                </div>
                                <div class="col-md-2">

                                    
                                    <button class="btn btn-outline-success"  onclick="analizarCopia()"
                                        type="button">Analizar</button>
                                </div>
                                <div class="col-md-5">
                                    <div style="width: 550px; margin-right: 20px; height: 700px;">
                                        <h3 >Entrada 2</h3>
                                        <div class="content">
                                            <br>
                                            <div class="content">
                                                <div class="btn-group" role="group" aria-label="...">
                                                    <input type="file" style="width: 30%;" id="file-input" accept=".java" class="btn btn-outline-secondary form-control-file">
                                                
                                                    <button class="btn btn-outline-primary" id="read-button" type="button">Cargar
                                                        Doc</button>
                                                        </div>
                                                    </div>  
                                        <br>
                                            <textarea class="rownr" style="height: 600px;" rows="20" cols="3" value="1" readonly></textarea>
                                            <span>
                                                <textarea class="analize" name="textAreacopy2" id="textAreacopy2"
                                                    style="background-color: white; width: 70%; height: 600px;" nowrap="nowrap" wrap="off"
                                                    autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                                                    oninput="input_changed(this)" onchange="input_changed(this)"
                                                    onscroll="scroll_changed(this)"></textarea><br /><br />
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                            
                            
                        </div>
                      </div>

                </div>
                <div class="col">
                </div>
              </div>
            
        </div>
      </div>

    </main>

    <footer class="text-muted">
      <div class="container">
        <p class="float-right">
          <a href="#">Back to top</a>
        </p>
      </div>
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://getbootstrap.com/docs/4.0/dist/js/bootstrap.min.js"></script>
    <script src="https://getbootstrap.com/docs/4.0/assets/js/vendor/holder.min.js"></script>
    <SCRIPT>

        //POST
    
        const Url = "http://localhost:3000/api/v1/server";
        var ast = null;
        //ANALIZAR TEXTO
        function analizar() {
            var texto = document.getElementById("textAreaAnalizar").value;
            const Data = {
                entrada: texto,
                consola: "consola"
            }
    
            var settings = {
                url: Url + "/analizar",
                method: 'POST',
                dataType: 'json',
                data: Data
            }
    
            $.ajax(settings).then(function (response) {
                var cadena = "";
                for (let index = 0; index < response.consola.length; index++) {
                    const element = response.consola[index];
                    cadena = cadena + element + "\n";  
                }
                document.getElementById("textAreaConsola").textContent = cadena;
                ast = response.ast;
                console.log(ast);
            });
    
        }
        //CARGAR ARCHIVO
        document.querySelector("#read-button").addEventListener('click', function () {
            if (document.querySelector("#file-input").files.length == 0) {
                alert('Error : No file selected');
                return;
            }
            // first file selected by user
            var file = document.querySelector("#file-input").files[0];
    
            // perform validation on file type & size if required
    
            // read the file
            var reader = new FileReader();
    
            // file reading finished successfully
            reader.addEventListener('load', function (e) {
                // contents of file in variable     
                var text = e.target.result;
    
                document.querySelector("#textAreaAnalizar").innerHTML = text;
    
            });
    
            // file reading failed
            reader.addEventListener('error', function () {
                alert('Error : Failed to read file');
            });
    
            // read as text file
            reader.readAsText(file);
        });
    
        //LINEAS DE CODIGO
        var cntline;
        function input_changed(obj_txt) {
            obj_rownr = obj_txt.parentElement.parentElement.getElementsByTagName('textarea')[0];
            cntline = count_lines(obj_txt.value);
            if (cntline == 0) cntline = 1;
            tmp_arr = obj_rownr.value.split('\n');
            cntline_old = parseInt(tmp_arr[tmp_arr.length - 1], 10);
            // if there was a change in line count
            if (cntline != cntline_old) {
                obj_rownr.cols = cntline.toString().length; // new width of txt_rownr
                populate_rownr(obj_rownr, cntline);
                scroll_changed(obj_txt);
            }
        }
    
        function scroll_changed(obj_txt) {
            obj_rownr = obj_txt.parentElement.parentElement.getElementsByTagName('textarea')[0];
            scrollsync(obj_txt, obj_rownr);
        }
    
        function scrollsync(obj1, obj2) {
            // scroll text in object id1 the same as object id2
            obj2.scrollTop = obj1.scrollTop;
        }
    
        function populate_rownr(obj, cntline) {
            tmpstr = '';
            for (i = 1; i < cntline; i++) {
                tmpstr = tmpstr + i.toString() + '\n';
            }
            obj.value = tmpstr;
        }
    
        function count_lines(txt) {
            if (txt == '') {
                return 1;
            }
            return txt.split('\n').length + 1;
        }
    
    
        ////////////////ERRORES
        function getLexError(uri, type) {
            var settings = {
                url: Url + uri,
                method: 'GET',
                dataType: 'json',
                //data: Data
            }
            var cadena = "";
            $.ajax(settings).then(function (response) {
    
                for (var i = 0; i < response.length; i++) {
                    cadena = cadena + "<tr>\n" + "     <th scope=\"row\">" + (i) + "</th>\n";
                    var obj = response[i];
                    for (var key in obj) {
                        cadena = cadena + "     <td>" + obj[key] + "</td>\n";
                    }
                    cadena = cadena + "</tr>\n";
                }
                descargar(cadena, type);
            });
    
        }
    
        function descargar(cadena, type) {
    
            var html = "";
    
            if (type == "lex") {
                html = head + body1 + cadena2 + body3 + cadena + body2 + "</body>" + "</html>";
            } else {
                html = head + body1 + cadena3 + body3 + cadena + body2 + "</body>" + "</html>";
            }
    
            print(html, "error"+".html")
    
    
        }
    
    
        //Guardar Archivos
        function saveText(){
            var texto = document.getElementById("textAreaAnalizar").value;
            print(texto, "entrada.java");
        }
    
    
    
        ////REPORTE AST
        var concatenar = "";
        function getTree() {
            concatenar = "";
            console.log(ast.list);
            getElements(ast.list, "_ast_");
            var html = "";
            html = head + container  + divInit + concatenar + divEnd + styles +scriptText;
            print(html, "ast"+".html")
    
        }
    
    
    
    
        function print(html, name) {
    
            var textToWrite = html;
            var textFileAsBlob = new Blob([textToWrite], { type: 'text/plain' });
            var fileNameToSaveAs = name;
            var downloadLink = document.createElement("a");
            downloadLink.download = fileNameToSaveAs;
            downloadLink.innerHTML = "Download File";
            if (window.webkitURL != null) {
                downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);
            }
            else {
                downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
                downloadLink.onclick = destroyClickedElement;
                downloadLink.style.display = "none";
                document.body.appendChild(downloadLink);
            }
    
            downloadLink.click();
    
        }
    
        function getElements(list, id) {
            //LIST: LISTA DE INSTRUCCIONES
            // ID: ID DEL SUBARBOL, PARA DIFERENCIAR ENTRE ELLOS, POR EJEMPLO 'IF_ast_1', 'IF_ast_5', 'FOR_ast_15', ETC
    
    
            for (let i = 0; i < list.length; i++) {
    
                const element = list[i];
                concatenar = concatenar + "<li><span>" +
                        "<a style=\"color:#000; text-decoration:none;\" data-toggle=\"collapse\" href=\"#" + element.name + id + i +
                        "\" aria-expanded=\"false\" aria-controls=\"" + element.name + id + i + "\">" +
                        "<i class=\"collapsed\">" +
                        "<i class=\"fas fa-folder\"></i></i>" +
                        "<i class=\"expanded\"><i class=\"far fa-folder-open\"></i></i> " + element.name + "</a></span>" +
                        "<ul><div id=\"" + element.name + id + i + "\" class=\"collapse\">";
    
    
                if(element.name =="Declaration"){
                    DataType(element.type.name, element.type.name + id + i);
                    if(element.data != null){
                        DataAssignationOrDeclaration("Data" + id + i, element.data.name + id + i, element.data.name, element.data.name);
                    }
                } 
                else if(element.name == "Assignation"){
                    if(element.data != null){
                        DataAssignationOrDeclaration("Data" + id + i, element.data.name + id + i, element.data.name, element.data.name);
                    }
                } 
                else if(element.name == "Print") {
                    concatenar = concatenar + "<li><span><i class=\"far fa-file\"></i><a> " + element.param.name + "</a></span></li>\n";
                } 
                else if(element.name == "Comment"){
                    concatenar = concatenar + "<li><span><i class=\"far fa-file\"></i><a> " + element.type + "</a></span></li>\n";
                }
                /*SECCION IF*/
                else if(element.name == "If"){
                    Condition(element.name + id + (i+1), element.condition.name);
                    InstructionListIf(element.list, element.ElseList , "if"+id + i)
                } 
                else if(element.name == "Else") {
                    InstructionList(element.list, "else" + id + i)
                }
                /*SECCION SWITCH*/
                else if(element.name == "Switch"){
                    Condition(element.name + id + (i+i), element.condition.name);
                    InstructionListIf(element.list, element.default, "switch" + id + i)
                }
                else if(element.name == "Case") {
                    Condition(element.name + id + (i+i+1), element.condition.name);
                    InstructionList(element.list, "case"+ i +id + (i+i+2))
                } 
                else if(element.name == "Default"){
                    InstructionList(element.list, "default" +id + (i+i+3))
                } 
                /*SECCION WHILE*/
                if(element.name == "While"){
                    Condition(element.name + id + (i+i+1), element.condition.name);
                    InstructionList(element.list, "while" +id + (i+i+2))    
                }
    
                /*SECCION DOWHILE*/
                else if(element.name == "DoWhile"){
                    InstructionList(element.list, "dowhile" + id + (i+i+2)) 
                    Condition(element.name + id + (i+i+1), element.condition.name);
                }
                /*SECCION FOR*/
                else if(element.name == "For"){
                    getElements([element.assignationOrDeclaration])
                    Condition(element.name + id + (i+i), element.condition.name);
                    concatenar = concatenar + "<li><span><i class=\"far fa-file\"></i><a> " + element.incrementDecrement.name + "</a></span></li>\n";
                    InstructionList(element.list, "for" + id + (i+i+1))
                }
                else if(element.name == "Break" || element.name == "Continue"){
                    concatenar = concatenar + "<li><span><i class=\"far fa-file\"></i><a> " + element.name + "</a></span></li>\n";
                } 
                else if(element.name == "Return"){
                    InstructionList(element.list, "return" + id + (i+1))
                }
    
    
                /*SECCION FUNCION */
                else if(element.name == "Function"){
                    DataType(element.type.name, element.type.name + id + i);
                    Params(element.parameter, element.name + id + (i+i+1));
                    InstructionList(element.list, element.name + id + (i+i+2))
                }
    
                /*SECCION METODO*/
                else if(element.name == "Method"){
                    Params(element.parameter, element.name + id + (i+i+1));
                    InstructionList(element.list, element.name + id + (i+i+2))
                }
    
                else if(element.name == "CallFunction"){
                    getElements(element.list)
                }
    
                concatenar = concatenar + "</ul>\n</li>";
    
            }
        }
    
        /*IF*/
            /*METODOS Y FUNCIONES*/
        function InstructionListIf(list, elseList, id){
            concatenar = concatenar + "<li><span>" +
            "<a style=\"color:#000; text-decoration:none;\" data-toggle=\"collapse\" href=\"#" + "lst" + id +
            "\" aria-expanded=\"false\" aria-controls=\"" + "lst" + id + "\">" +
            "<i class=\"collapsed\">" +
            "<i class=\"fas fa-folder\"></i></i>" +
            "<i class=\"expanded\"><i class=\"far fa-folder-open\"></i></i> " + "InstructionList" + "</a></span>" +
            "<ul><div id=\"" + "lst" + id + "\" class=\"collapse\">";
    
            getElements(list, id)
            getElements(elseList, id)
            concatenar = concatenar  + "</div></ul></li>";
        
        }
    
        /*Condiciones*/
        function Condition(idElement, condition){
            concatenar = concatenar + "<li><span>" +
            "<a style=\"color:#000; text-decoration:none;\" data-toggle=\"collapse\" href=\"#" + idElement +
            "\" aria-expanded=\"false\" aria-controls=\"" + idElement + "\">" +
            "<i class=\"collapsed\">" +
            "<i class=\"fas fa-folder\"></i></i>" +
            "<i class=\"expanded\"><i class=\"far fa-folder-open\"></i></i> " + "Condition" + "</a></span>" +
            "<ul><div id=\"" + idElement + "\" class=\"collapse\">";
            concatenar = concatenar + "<li><span><i class=\"far fa-file\"></i><a>" + "  " + condition + "</a></span></li>\n";
            concatenar = concatenar  + "</div></ul></li>";
        }
    
        /*METODOS Y FUNCIONES*/
        function InstructionList(list, id){
            concatenar = concatenar + "<li><span>" +
            "<a style=\"color:#000; text-decoration:none;\" data-toggle=\"collapse\" href=\"#" + "lst" + id +
            "\" aria-expanded=\"false\" aria-controls=\"" + "lst" + id + "\">" +
            "<i class=\"collapsed\">" +
            "<i class=\"fas fa-folder\"></i></i>" +
            "<i class=\"expanded\"><i class=\"far fa-folder-open\"></i></i> " + "InstructionList" + "</a></span>" +
            "<ul><div id=\"" + "lst" + id + "\" class=\"collapse\">";
    
            getElements(list, id)
            concatenar = concatenar  + "</div></ul></li>";
        
        }
    
    
    
    
    
    
        /*ASIGNACION Y DECLARACION*/
    
        function DataAssignationOrDeclaration(nameview, elementId, name, type){
            //DECLARATAION : DATATYPE ID = DATA;
            // DATA: EXPRESSION
            // EXPRESSION : NUMERO, CHAR, STRING, BOOL, ETC
    
    
            //ASSIGNATION :  ID = DATA;
            // DATA: EXPRESSION
            // EXPRESSION : NUMERO, CHAR, STRING, BOOL, ETC
            //DATA DE LA DECLARACION O ASIGNACION
            concatenar = concatenar + "<li><span>" +
                            "<a style=\"color:#000; text-decoration:none;\" data-toggle=\"collapse\" href=\"#" + nameview +
                            "\" aria-expanded=\"false\" aria-controls=\"" + elementId + "\">" +
                            "<i class=\"collapsed\">" +
                            "<i class=\"fas fa-folder\"></i></i>" +
                            "<i class=\"expanded\"><i class=\"far fa-folder-open\"></i></i> " + "Data" + "</a></span>" +
                            "<ul><div id=\"" + nameview + "\" class=\"collapse\">";
    
                                //EXPRESSION 
                                concatenar = concatenar + "<li><span>" +
                                "<a style=\"color:#000; text-decoration:none;\" data-toggle=\"collapse\" href=\"#" + elementId +
                                "\" aria-expanded=\"false\" aria-controls=\"" + elementId + "\">" +
                                "<i class=\"collapsed\">" +
                                "<i class=\"fas fa-folder\"></i></i>" +
                                "<i class=\"expanded\"><i class=\"far fa-folder-open\"></i></i> " + name + "</a></span>" +
                                "<ul><div id=\"" + elementId + "\" class=\"collapse\">";
                                concatenar = concatenar + "<li><span><i class=\"far fa-file\"></i><a>" + "  " + type + "</a></span></li>\n";
                                concatenar = concatenar + "</ul>\n</li>";
    
            concatenar = concatenar + "</ul>\n</li>";
        }
    
        function DataType(name, element){
    
            concatenar = concatenar + "<li><span>" +
                                    "<a style=\"color:#000; text-decoration:none;\" data-toggle=\"collapse\" href=\"#" + element +
                                    "\" aria-expanded=\"false\" aria-controls=\"" + element + "\">" +
                                    "<i class=\"collapsed\">" +
                                    "<i class=\"fas fa-folder\"></i></i>" +
                                    "<i class=\"expanded\"><i class=\"far fa-folder-open\"></i></i> " + name + "</a></span>" +
                                    "<ul><div id=\"" + element + "\" class=\"collapse\">";
                                    concatenar = concatenar + "<li><span><i class=\"far fa-file\"></i><a> " + "Primitive" + "</a></span></li>\n";
                                    concatenar = concatenar + "</ul>\n</li>";
                        
        }
    
    
        function Params(list, element){
    
            concatenar = concatenar + "<li><span>" +
                                    "<a style=\"color:#000; text-decoration:none;\" data-toggle=\"collapse\" href=\"#" + element +
                                    "\" aria-expanded=\"false\" aria-controls=\"" + element + "\">" +
                                    "<i class=\"collapsed\">" +
                                    "<i class=\"fas fa-folder\"></i></i>" +
                                    "<i class=\"expanded\"><i class=\"far fa-folder-open\"></i></i> " + "Parameter" + "</a></span>" +
                                    "<ul><div id=\"" + element + "\" class=\"collapse\">";
                                    
                                    
                                    
                                    getElements(list, element)
                                    
                                    
                                    
                                    concatenar = concatenar + "</ul>\n</li>";
                        
        }
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
        var head = "<!DOCTYPE html>\n" +
            "<html>\n" +
            "<head>\n" +
            "    <meta charset='utf-8'>\n" +
            "    <meta http-equiv='X-UA-Compatible' content='IE=edge'>\n" +
            "    <title> Repote" + "</title>\n" +
            "    <meta name='viewport' content='width=device-width, initial-scale=1'>\n" +
            "    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>\n" +
            "    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\">\n" +
            "    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\">\n" +
            "</head>" +
            "<body>\n" +
            "  <nav class=\"navbar navbar-light bg-light\">\n" +
            "    <span class=\"navbar-brand mb-0 h1\">Compiladores 1</span>\n" +
            "  </nav>";
    
        var cadena2 = "<th scope =\"col\">No</th>\n" +
            "          <th scope=\"col\">Token</th>\n" +
            "          <th scope=\"col\">Fila</th>\n" +
            "          <th scope=\"col\">Columna</th>\n" +
            "          <th scope=\"col\">Descripcion</th>\n";
    
    
        var cadena3 = "<th scope =\"col\">No</th>\n" +
            "<th scope=\"col\">Descripcion</th>\n";
    
    
        var body1 = "<div class=\"container\">\n" +
            "    <div class=\"jumbotron jumbotron-fluid\">\n" +
            "      <div class=\"container\">\n" +
            "        <h1 class=\"display-4\"> Archivo de entrada" + "</h1>\n" +
            "        <p class=\"lead\">Listado de errores del archivo de entrada " + " detectados por el analizador</p>\n" +
            "      </div>\n" +
            "    </div>\n" +
            "    <div class=\"row\">\n" +
            "    <table id=\"data\"  cellspacing=\"0\" style=\"width: 100 %\" class=\"table table-striped table-bordered table-sm\">\n" +
            "      <thead class=\"thead-dark\">\n" +
            "        <tr>\n";
    
        var body3 = "        </tr>\n" +
            "      </thead>" +
            "<tbody>";
    
        var body2 = "</tbody>\n" +
            "    </table>\n" +
            "</div>\n" +
            "  </div>";
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
        ///REPORTE AST
    
    
    
        var styles = "<link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.0.13/css/all.css\">\n<style>.tree li { list-style-type:none; margin:0; padding:10px 5px 0 5px; position:relative }"+
        ".tree li::before, .tree li::after {content:'';left:-20px; position:absolute; right:auto}"+
        ".tree li::before { border-left:2px solid #000; bottom:50px; height:100%; top:0; width:1px}"+
        ".tree li::after { border-top:2px solid #000; height:20px; top:25px; width:25px }"+
        ".tree li span { -moz-border-radius:5px; -webkit-border-radius:5px; border:2px solid #000; border-radius:3px; display:inline-block; padding:3px 8px; text-decoration:none; cursor:pointer; }"+
        ".tree>ul>li::before, .tree>ul>li::after { border:0 }"+
        ".tree li:last-child::before { height:27px } .tree li span:hover { background: #007bff; border:2px solid #007bff; }"+
        "[aria-expanded=\"false\"] > .expanded, [aria-expanded=\"true\"] > .collapsed { display: none; }</style>\n";
    
    
    
        var container = "<div class=\"container\">\n" +
            "    <div class=\"jumbotron jumbotron-fluid\">\n" +
            "      <div class=\"container\">\n" +
            "        <h1 class=\"display-4\"> Reporte AST" + "</h1>\n" +
            "        <p class=\"lead\">Reporte de instrucciones obtenidas del archivo de entrada</p>\n" +
            "      </div>\n" +
            "    </div>\n";
    
    
        var divInit = "<div class=\"tree \"><ul><li><span>" +
            "<a style=\"color:#000; text-decoration:none;\" data-toggle=\"collapse\" href=\"#Class\" aria-expanded=\"true\"" +
            "aria-controls=\"Class\"><i class=\"collapsed\"><i class=\"fas fa-folder\"></i></i>" +
            "<i class=\"expanded\"><i class=\"far fa-folder-open\"></i></i> Class</a></span>" +
            "<div id=\"Class\" class=\"collapse show\"><ul>"+ 
            
            "<li><span>" +
            "<a style=\"color:#000; text-decoration:none;\" data-toggle=\"collapse\" href=\"#" + "instList" +
            "\" aria-expanded=\"false\" aria-controls=\"" + "instList" + "\">" +
            "<i class=\"collapsed\">" +
            "<i class=\"fas fa-folder\"></i></i>" +
            "<i class=\"expanded\"><i class=\"far fa-folder-open\"></i></i> " + "InstructionList" + "</a></span>" +
            "<ul><div id=\"" + "instList" + "\" class=\"collapse\">";
    
    
    
        var divEnd = "</div></ul></li></ul></div></li></ul></div>";
    
        var scriptText = "<script src=\"https://code.jquery.com/jquery-3.5.1.slim.min.js\"><" + "/script>";
        scriptText = scriptText + "<script src=\"https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js\" ><" + "/script>";
        scriptText = scriptText + "<script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js\"><" + "/script></body></html>";
    
    












            /*SECCION COPIAS*/

            function analizarCopia(){
                var texto1 = document.getElementById("textAreacopy").value;

                var texto2 = document.getElementById("textAreacopy2").value;

                const Data = {
                entrada: texto1,
                copia: texto2
            }
    
            var settings = {
                url: Url + "/copia",
                method: 'POST',
                dataType: 'json',
                data: Data
            }
    
            $.ajax(settings).then(function (response) {
                
                
                var claseResponse = response.claseCopia;
                var metodosResponse = response.metCopia;
                var funcionResponse = response.funcCopia;
                var varMtResponse = response.varMtCopia;
                var varfuncResponse = response.varFuCopia;
                
                console.log(response)

                var descripcionClaseCopia = "<tr>\n<td>" + claseResponse.Clase1  + "</td>\n"+
                                            "\n<td>" + claseResponse.Clase2  + "</td>\n"+
                                            "\n<td>" + claseResponse.Descripcion  + "</td>\n"+
                                            "\n<td>" + claseResponse.EsCopia  + "</td>\n"+
                                            "\n<td>" + claseResponse.FuncionesClase1  + "</td>\n"+
                                            "\n<td>" + claseResponse.FuncionesClase2  + "</td>\n"+
                                            "\n<td>" + claseResponse.MetodosClase1  + "</td>\n"+
                                            "\n<td>" + claseResponse.MetodosClase2  + "</td>\n</tr>";



                var descripcionFuncionCopia = "<tr>\n";
                for (let i = 0; i < funcionResponse.length; i++) {
                    const element = funcionResponse[i];
                    descripcionFuncionCopia = descripcionFuncionCopia +
                    "<td>" + element.Name1 + "</td>\n" + 
                    "<td>" + element.Class1 + "</td>\n" + 
                    "<td>" + element.Name2 + "</td>\n" + 
                    "<td>" + element.Class2 + "</td>\n" + 
                                        
                    "<td>\n" + 
                    
                    "<table>\n" + 
                        "<tr>\n<td>Type</td>\n <td>Id</td>\n</tr>\n";                
        
                            for (let j = 0; j < element.ParamsF1.length; j++) {
                                const el = element.ParamsF1[j];
                                descripcionFuncionCopia = descripcionFuncionCopia + 
                                "<tr>\n" +
                                    "<td>" + el.type.type + "</td>"+
                                    "<td>" + el.id + "</td>"+
                                "</tr>\n"; 
                        }
                        descripcionFuncionCopia = descripcionFuncionCopia + "</table>\n"
                    + "</td>\n"+         
                    "<td>\n" + 
                        "<table>\n" + 
                        "<tr>\n<td>Type</td> \n<td>Id</td>\n</tr>\n"; 

                        for (let j = 0; j < element.ParamsF2.length; j++) {
                            const el = element.ParamsF2[j];
                            descripcionFuncionCopia = descripcionFuncionCopia + 
                            "<tr>\n" +
                                "<td>" + el.type.type + "</td>"+
                                "<td>" + el.id + "</td>"+
                            "</tr>\n"; 
                    }
                    descripcionFuncionCopia = descripcionFuncionCopia + "</table> </td>\n" + 
                    "<td>" + element.Type + "</td>\n"+
                    "<td >" + element.Return + "</td>\n</tr>\n" ;
                }    





                var descripcionMetodoCopia = "<tr>\n";
                for (let i = 0; i < metodosResponse.length; i++) {
                    const element = metodosResponse[i];
                    descripcionMetodoCopia = descripcionMetodoCopia +
                    "<td>" + element.Name1 + "</td>\n" + 
                    "<td>" + element.Class1 + "</td>\n" + 
                    "<td>" + element.Name2 + "</td>\n" + 
                    "<td>" + element.Class2 + "</td>\n" + 
                    
                    "<td>\n" + 
                    
                    "<table>\n" + 
                        "<tr>\n<td>Type</td>\n <td>Id</td>\n</tr>\n";                
        
                            for (let j = 0; j < element.ParamsF1.length; j++) {
                                const el = element.ParamsF1[j];
                                descripcionMetodoCopia = descripcionMetodoCopia + 
                                "<tr>\n" +
                                    "<td>" + el.type.type + "</td>"+
                                    "<td>" + el.id + "</td>"+
                                "</tr>\n"; 
                        }
                        descripcionMetodoCopia = descripcionMetodoCopia + "</table>\n"
                    + "</td>\n"+         
                    "<td>\n" + 
                        "<table>\n" + 
                        "<tr>\n<td>Type</td> \n<td>Id</td>\n</tr>\n"; 

                        for (let j = 0; j < element.ParamsF2.length; j++) {
                            const el = element.ParamsF2[j];
                            descripcionMetodoCopia = descripcionMetodoCopia + 
                            "<tr>\n" +
                                "<td>" + el.type.type + "</td>"+
                                "<td>" + el.id + "</td>"+
                            "</tr>\n"; 
                    }
                    descripcionMetodoCopia = descripcionMetodoCopia + "</table>\n</tr>\n" ;

                }    



                var descripcionVariableCopia = "";
                for (let i = 0; i < varMtResponse.length; i++) {
                    const element = varMtResponse[i];
                    descripcionVariableCopia = descripcionVariableCopia + "<tr>" +
                    "<td>" + element.Name + "</td>\n" + 
                    "<td>" + element.original + "</td>\n" + 
                    "<td>" + element.copia + "</td>\n" + 
                    "<td>" + element.type + "</td>\n</tr>\n" ;
                }    
                for (let i = 0; i < varfuncResponse.length; i++) {
                    const element = varfuncResponse[i];
                    descripcionVariableCopia = descripcionVariableCopia+ "<tr>" +
                    "<td>" + element.Name + "</td>\n" + 
                    "<td>" + element.original + "</td>\n" + 
                    "<td>" + element.copia + "</td>\n" + 
                    "<td>" + element.type + "</td>\n</tr>\n" ;
                }






                var html = head + 
                            containerCopia +
                            "<h1>Detalles de clase </h1>"+
                            table + 
                                headtable + 
                                    claseCopia + 
                                endHeadTable + 
                                bodyTable + 
                                    descripcionClaseCopia + 
                            endBodyTable+
                            "<br><br>"+
                            "<h1>Detalles de funciones </h1>"+
                            table + 
                                headtable + 
                                    funcionCopia + 
                                endHeadTable + 
                                bodyTable + 
                                    descripcionFuncionCopia + 
                            endBodyTable+
                            "<h1>Detalles de metodos </h1>"+
                            table + 
                                headtable + 
                                    metodoCopia + 
                                endHeadTable + 
                                bodyTable + 
                                    descripcionMetodoCopia + 
                            endBodyTable+
                            "<h1>Detalles de Variables </h1>"+
                            table + 
                                headtable + 
                                    variableCopia + 
                                endHeadTable + 
                                bodyTable + 
                                    descripcionVariableCopia + 
                            endBodyTable+
                            
                            


                        "</div></div></body>\n";

                
                
                




                
                
                
                
                print(html, "copia.html")


            });
    
            
            }







            var containerCopia = "<div class=\"container\">\n" +
            "    <div class=\"jumbotron jumbotron-fluid\">\n" +
            "      <div class=\"container\">\n" +
            "        <h1 class=\"display-4\"> Reporte de Clases copia" + "</h1>\n" +
            "        <p class=\"lead\">Clases, metodos, funciones y variables copia</p>\n" +
            "      </div>\n" +
            "    </div>\n"+"<div class=\"row\">\n";


    
    
            var claseCopia = "<th scope =\"col\">Clase 1</th>\n" +
            "          <th scope=\"col\">Clase 2</th>\n" +
            "          <th scope=\"col\">Descripcion</th>\n" +
            "          <th scope=\"col\">Es copia</th>\n" +
            "          <th scope=\"col\">Funciones Clase 1</th>\n"+
            "          <th scope=\"col\">Metodos Clase 1</th>\n"+
            "          <th scope=\"col\">Funciones Clase 2</th>\n"+
            "          <th scope=\"col\">Metodos Clase 2</th>\n";


            var funcionCopia = "<th scope =\"col\">Funcion</th>\n" +
            "          <th scope=\"col\">Clase</th>\n" +
            "          <th scope=\"col\">Copia</th>\n" +
            "          <th scope=\"col\">Clase</th>\n" +
            "          <th scope=\"col\">Parametros Funcion</th>\n" +
            "          <th scope=\"col\">Parametros Copia</th>\n" +
            "          <th scope=\"col\">Tipo de Funcion</th>\n"+
            "          <th scope=\"col\">Retorno</th>\n";

            var metodoCopia = "<th scope =\"col\">Metodo</th>\n" +
            "          <th scope=\"col\">Clase</th>\n" +
            "          <th scope=\"col\">Copia</th>\n" +
            "          <th scope=\"col\">Clase</th>\n" +
            "          <th scope=\"col\">Parametros Metodo</th>\n" +
            "          <th scope=\"col\">Parametros Copia</th>\n";


            var variableCopia = "<th scope =\"col\">Funcion o Metodo</th>\n" +
            "          <th scope=\"col\">Variable Original</th>\n" +
            "          <th scope=\"col\">Variable Copia</th>\n" +
            "          <th scope=\"col\">Tipo</th>\n";




        var table = "<table id=\"data\"  cellspacing=\"0\" style=\"width: 100 %\" class=\"table table-striped table-bordered table-sm\">\n" ;
    
    
        var headtable  = "<thead class=\"thead-dark\">\n" +
                            "<tr>\n";
    
        var endHeadTable = " </tr>\n" +
                        " </thead>";
        

        var bodyTable = "<tbody>";
    
        var endBodyTable = "</tbody>\n" +
                        "</table>";
 




    
    </SCRIPT>
    
